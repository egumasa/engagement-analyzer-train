preprocess_engagementv3:
  cmd: python -m spacy run preprocess_engagementv3
  script:
    - python scripts/preprocessing/preprocess_engagement_v2.py assets/EDT_three_20230124_oversampled/train.iob
      data/engagement_train.spacy sc
    - python scripts/preprocessing/preprocess_engagement_v2.py assets/EDT_three_20230124_oversampled/dev.iob
      data/engagement_dev.spacy sc
    - python scripts/preprocessing/preprocess_engagement_v2.py assets/EDT_three_20230124_oversampled/test.iob
      data/engagement_test.spacy sc
  deps:
    - path: assets/EDT_three_20230124_oversampled/train.iob
      md5: 59cf5b3cbe445de1753e2020bc5f675c
    - path: assets/EDT_three_20230124_oversampled/dev.iob
      md5: 9c283ff01433ea4884dfc57b95f7933b
    - path: assets/EDT_three_20230124_oversampled/test.iob
      md5: 242b303f6090ac0c9187adc66b547e3c
  outs:
    - path: data/engagement_train.spacy
      md5: ea33df518e13cfd6bfd6f7b331867d27
    - path: data/engagement_dev.spacy
      md5: 107af3db579e3b0dd767c5236217fd2d
    - path: data/engagement_test.spacy
      md5: 83f9a641bb6b8c02f9cf2852b4aa97fd
  spacy_version: 3.6.0
  spacy_git_version: 6fc153a26
train_spancat:
  cmd: python -m spacy run train_spancat
  script:
    - python -m spacy train configs/subtree/lg.cfg --output training/spancat/engagement/lg_subtree/
      --paths.train data/engagement_train.spacy --paths.dev data/engagement_dev.spacy
      --gpu-id 0 --vars.spans_key sc -c ./scripts/custom_functions.py
  deps:
    - path: configs/subtree/lg.cfg
      md5: f7d9199cc6fc823acbafbc088f6931e5
    - path: data/engagement_train.spacy
      md5: ea33df518e13cfd6bfd6f7b331867d27
    - path: data/engagement_dev.spacy
      md5: 107af3db579e3b0dd767c5236217fd2d
  outs:
    - path: training/spancat/engagement/lg_subtree/model-best
      md5: fca9352a4d28568bd39516dc59a1f252
  spacy_version: 3.6.0
  spacy_git_version: 6fc153a26
evaluate_spancat:
  cmd: python -m spacy run evaluate_spancat
  script:
    - mkdir -p displacy/spancat_engagement_lg_subtree/train
    - mkdir -p displacy/spancat_engagement_lg_subtree/dev
    - python -m spacy evaluate training/spancat/engagement/lg_subtree/model-best data/engagement_train.spacy
      --output metrics/spancat_engagement_lg_subtree.json --gpu-id 0  -c ./scripts/custom_functions.py
    - python -m spacy evaluate training/spancat/engagement/lg_subtree/model-best data/engagement_dev.spacy
      --output metrics/spancat_engagement_lg_subtree.json --gpu-id 0  -c ./scripts/custom_functions.py
  deps:
    - path: training/spancat/engagement/lg_subtree/model-best
      md5: fca9352a4d28568bd39516dc59a1f252
    - path: data/engagement_dev.spacy
      md5: 107af3db579e3b0dd767c5236217fd2d
  outs:
    - path: metrics/spancat_engagement_lg_subtree.json
      md5: 5207f698d668f7c00310fd197fec40c9
  spacy_version: 3.6.0
  spacy_git_version: 6fc153a26
